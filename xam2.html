<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JSON File Read and Write</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    textarea { width: 100%; height: 200px; }
    input[type="file"] { margin: 10px 0; }
    button { margin-top: 10px; padding: 10px 20px; }
  </style>
</head>
<body>
  <h2>Read and Write JSON Files</h2>

  <input type="file" id="fileInput" accept=".json"><br>
  <textarea id="jsonData" placeholder="JSON will appear here..."></textarea><br>
  <button onclick="downloadJSON()">Download JSON</button>

  <script>
    const fileInput = document.getElementById('fileInput');
    const jsonData = document.getElementById('jsonData');

    fileInput.addEventListener('change', function () {
      const file = fileInput.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function (e) {
        try {
          const content = JSON.parse(e.target.result);
          jsonData.value = JSON.stringify(content, null, 2); // pretty print
        } catch (err) {
          alert("Invalid JSON file!");
        }
      };
      reader.readAsText(file);
    });

    function downloadJSON() {
      try {
        const data = JSON.parse(jsonData.value); // validate JSON
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
        const url = URL.createObjectURL(blob);

        const link = document.createElement('a');
        link.href = url;
        link.download = "updated.json";
        link.click();

        URL.revokeObjectURL(url);
      } catch (err) {
        alert("Invalid JSON syntax!");
      }
    }
  </script>
</body>
</html>